extends ../layouts/master

block content
    main.content.px-3.py-4
        div.container-fluid
            div.row
                div.col-md-3
                    // Steps
                    ul.list-group
                        li.list-group-item.active.step-1(style="background-color:#113946; color:white") Daftar
                        li.list-group-item.step-2 Upload Kelengkapan
                        li.list-group-item.step-3 Selesai
                div.col-md-9
                    // Registration form - Step 1
                    div#step-1.card.bg-light.shadow.border-0.rounded-3.mb-4
                        div.card-header.text-white(style="background-color:#113946")
                            h5 Daftar beasiswa
                        div.card-body
                            form#form-step-1(action='/submit-pengajuan' method='post')
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='nrp') NRP :
                                    div.col-sm-8
                                        input#nrp.form-control(type='text' name='nrp' placeholder='Masukkan NRP' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='ttl') Tempat, Tanggal Lahir :
                                    div.col-sm-8
                                        input#ttl.form-control(type='text' name='ttl' placeholder='Masukkan Tempat, Tanggal Lahir' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='jk') Jenis Kelamin :
                                    div.col-sm-8
                                        input#jk.form-control(type='text' name='jk' placeholder='Masukkan Jenis Kelamin' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='nama') Nama :
                                    div.col-sm-8
                                        input#nama.form-control(type='text' name='nama' placeholder='Masukkan Nama' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='hp') No HP :
                                    div.col-sm-8
                                        input#hp.form-control(type='text' name='hp' placeholder='Masukkan No HP' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='telp') No Telepon (Rumah) :
                                    div.col-sm-8
                                        input#telp.form-control(type='text' name='telp' placeholder='Masukkan No Telepon (Rumah)')
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='email') Email :
                                    div.col-sm-8
                                        input#email.form-control(type='email' name='email' placeholder='Masukkan Email' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='fakultas') Fakultas :
                                    div.col-sm-8
                                        input#fakultas.form-control(type='text' name='fakultas' placeholder='Masukkan Fakultas' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='prodi') Program Studi :
                                    div.col-sm-8
                                        input#prodi.form-control(type='text' name='prodi' placeholder='Masukkan Program Studi' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='program') Program :
                                    div.col-sm-8
                                        input#program.form-control(type='text' name='program' placeholder='Masukkan Program' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='angkatan') Angkatan :
                                    div.col-sm-8
                                        input#angkatan.form-control(type='text' name='angkatan' placeholder='Masukkan Angkatan' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='ipk') IPK :
                                    div.col-sm-8
                                        input#ipk.form-control(type='text' name='ipk' placeholder='Masukkan IPK' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='beasiswa') Nama Beasiswa :
                                    div.col-sm-8
                                        select#beasiswa.form-control(name='beasiswa' required)
                                            option(value=`${status.jenis_beasiswa_id}` selected='') #{status.jenis_beasiswas.name}
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='periode') Periode Beasiswa :
                                    div.col-sm-8
                                        select#periode.form-control(name='periode' required)
                                            option(value=`${status.periode_id}` selected='') #{status.periode.name}
                                div.d-flex.justify-content-lg-end
                                    button.btn.btn-primary(type='button' onclick='validateStep1()') Selanjutnya

                    // Upload form - Step 2
                    div#step-2.card.bg-light.shadow.border-0.rounded-3.mb-4(style='display:none')
                        div.card-header.text-white(style="background-color:#113946")
                            h5 Upload Kelengkapan
                        div.card-body
                            form#form-step-2(action='/submit-upload' method='post' enctype='multipart/form-data')
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='surat_rekomendasi') Surat Rekomendasi Dosen :
                                    div.col-sm-8
                                        input#surat_rekomendasi.form-control(type='file' name='surat_rekomendasi' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='pkm') Surat Pernyataan Bersedia Membuat PKM :
                                    div.col-sm-8
                                        input#pkm.form-control(type='file' name='pkm' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='tidak_terima_beasiswa') Surat Pernyataan Tidak Menerima Beasiswa Lain :
                                    div.col-sm-8
                                        input#tidak_terima_beasiswa.form-control(type='file' name='tidak_terima_beasiswa' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='dkbs') DKBS Baru :
                                    div.col-sm-8
                                        input#dkbs.form-control(type='file' name='dkbs' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='transkrip') Transkrip Nilai :
                                    div.col-sm-8
                                        input#transkrip.form-control(type='file' name='transkrip' required)
                                div.row.mb-3
                                    label.col-sm-4.col-form-label(for='lampiran') Lampiran Lainnya (Tidak Wajib) :
                                    div.col-sm-8
                                        input#lampiran.form-control(type='file' name='lampiran')
                                div.d-flex.justify-content-between
                                    button.btn.btn-secondary(type='button' onclick='showPreviousStep()') Sebelumnya
                                    button.btn.btn-primary(type='button' onclick='validateStep2()') Selanjutnya


                    // Confirmation form - Step 3
                    div#step-3.card.bg-light.shadow.border-0.rounded-3.mb-4(style='display:none')
                        div.card-header.text-white(style="background-color:#113946")
                            h5 Selesai
                        div.card-body
                            p Apakah Anda sudah yakin dengan pengisian tersebut?
                            div.d-flex.justify-content-between
                                button.btn.btn-secondary(type='button' onclick='showPreviousStep2()') Sebelumnya
                                button.btn.btn-success(type='submit') Submit


    // JavaScript
    script.
        function validateStep1() {
            const form = document.getElementById('form-step-1');
            if (form.checkValidity()) {
                showNextStep();
            } else {
                form.reportValidity();
            }
        }

        function validateStep2() {
            const form = document.getElementById('form-step-2');
            if (form.checkValidity()) {
                showNextStep2();
            } else {
                form.reportValidity();
            }
        }

        function showNextStep() {
            document.getElementById('step-1').style.display = 'none';
            document.getElementById('step-2').style.display = 'block';
            document.querySelector('.step-1').classList.remove('active');
            document.querySelector('.step-1').style.backgroundColor = 'white';
            document.querySelector('.step-1').style.color = 'black';
            document.querySelector('.step-2').classList.add('active');
            document.querySelector('.step-2').style.backgroundColor = '#113946';
            document.querySelector('.step-2').style.color = 'white';
        }

        function showPreviousStep() {
            document.getElementById('step-1').style.display = 'block';
            document.getElementById('step-2').style.display = 'none';
            document.querySelector('.step-2').classList.remove('active');
            document.querySelector('.step-2').style.backgroundColor = 'white';
            document.querySelector('.step-2').style.color = 'black';
            document.querySelector('.step-1').classList.add('active');
            document.querySelector('.step-1').style.backgroundColor = '#113946';
            document.querySelector('.step-1').style.color = 'white';
        }

        function showNextStep2() {
            document.getElementById('step-2').style.display = 'none';
            document.getElementById('step-3').style.display = 'block';
            document.querySelector('.step-2').classList.remove('active');
            document.querySelector('.step-2').style.backgroundColor = 'white';
            document.querySelector('.step-2').style.color = 'black';
            document.querySelector('.step-3').classList.add('active');
            document.querySelector('.step-3').style.backgroundColor = '#113946';
            document.querySelector('.step-3').style.color = 'white';

        }

        function showPreviousStep2() {
            document.getElementById('step-2').style.display = 'block';
            document.getElementById('step-3').style.display = 'none';
            document.querySelector('.step-3').classList.remove('active');
            document.querySelector('.step-3').style.backgroundColor = 'white';
            document.querySelector('.step-3').style.color = 'black';
            document.querySelector('.step-2').classList.add('active');
            document.querySelector('.step-2').style.backgroundColor = '#113946';
            document.querySelector('.step-2').style.color = 'white';
        }
